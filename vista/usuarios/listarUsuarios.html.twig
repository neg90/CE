{% extends "basePrivada.html.twig" %}
 
{% block title %} Lista de usuarios {% endblock %}
{% block contenedor %}
  <h3 id="tituloBloque">Listado de usuarios</h3>
  <div class="clearfix"></div>
  {% if eliminado == null %}
  {% elseif eliminado == 1 %}
  	<div class="alert alert-success" role="alert">El usuario fue eliminado correctamente</div>
  {% else %}
  	<div class="alert alert-success" role="alert">El usuario no pudo ser eliminado</div>
  {% endif %}
  <table class="table table-hover">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Usuario</th>
      <th>E-mail</th>
      <th>Rol</th>
      <th>Activo</th>
      <th>Controles</th>
    </tr>
  </thead>
  <tbody>
    {% if ListaUsuarios is null %}
		<tr>
			<td colspan="7">
				No se encontraron usuarios.
			</td>
		</tr>
	{% else %}
		{% for usuario in ListaUsuarios %}
			<tr>
				<td> {{ usuario.nombre }}</td>
				<td> {{ usuario.apellido }}</td>
				<td> {{ usuario.username }}</td>
				<td> {{ usuario.correo }}</td>
				{% if ListaRoles is null %}
					<td> - </td>
				{% else %}
					{% for rol in ListaRoles %}
						{% if rol.idrol == usuario.idrol %}
							<td> {{ rol.nombre }}</td>
						{% endif %}
					{% endfor %}
				{% endif %}
				<td> 
					{% if usuario.activo == 1 %}
						<span class="glyphicon glyphicon-ok" style="color:green" aria-hidden="true"></span>
					{% else %}
						<span class="glyphicon glyphicon-remove" style="color:red" aria-hidden="true"></span>
					{% endif %}
				</td>
				<td class="controles">
				<!--Ver user-->
					<form method="post" action="privado.php?c=usuarios&a=detalle" id="verUsuario{{usuario.idusuario}}">
						<input type="hidden" value="{{usuario.idusuario}}" name="id">
						<a href="javascript:{}" onclick="document.getElementById('verUsuario{{usuario.idusuario}}').submit(); return false;">
							<span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
						</a>
					</form>
				<!--Modificar user-->
					<form method="post" action="privado.php?c=usuarios&a=modificar" id="modificarUsuario{{usuario.idusuario}}">
						<input type="hidden" value="{{usuario.idusuario}}" name="idusuario">
						<a href="javascript:{}" onclick="document.getElementById('modificarUsuario{{usuario.idusuario}}').submit(); return false;">
							<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
						</a>
					</form>
				<!--Eliminar user -->
					<form method="post" action="privado.php?c=usuarios&a=eliminar&id={{usuario.idusuario}}" id="eliminaUsuario{{usuario.idusuario}}">
						<a href="javascript:{}" onclick="if(confirm('¿Está seguro que desea eliminar este usuario?')){document.getElementById('eliminaUsuario{{usuario.idusuario}}').submit();} return false;">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
						</a>
					</form>
				</td>
			</tr>
		{% endfor %}
	{% endif %}
  </tbody>
  </table>
{% endblock %}